(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(56)},50:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"loginSuccess",function(){return b}),n.d(a,"login",function(){return k});var i={};n.r(i),n.d(i,"view",function(){return V}),n.d(i,"actions",function(){return a}),n.d(i,"reducer",function(){return Y});var r=n(0),c=n.n(r),o=n(20),u=n.n(o),l=n(10),s=n(11),d=n(23),m=n(5),f=n(6),h=n(8),v=n(7),p=n(9),E=n(59),g=n(58),b=function(){return{type:"HOME/SUCCESS"}},k=function(e){return function(t,n){return fetch("/api/authenticate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e)}).then(function(e){if(200!==e.status)throw new Error("Fail to get response with status "+e.status);e.json().then(function(e){}).catch(function(e){})}).catch(function(e){})}},C=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.a.createElement("div",{className:"header"},c.a.createElement("span",{className:"title"},c.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"}),"LanBit"))}}]),t}(r.Component),O=Object(l.b)(function(e){return{}},function(e){return{login:function(t){e(k(t))}}})(C),j=n(12),N=n.n(j),y=n(24),M=n.n(y),w=function(e){return JSON.parse(JSON.stringify(e))},S=function(){return{id:M.a.generate(),name:"\u65b0\u5efa\u83dc\u5355",pub:!1,open:!0,edit:!0,child:[]}},x=function e(t,n){for(var a in n){if(n[a].id===t)return void(n[a].edit=!0);n[a].child&&n[a].child.length>0&&e(t,n[a].child)}},D=function e(t,n,a){for(var i in a){if(a[i].id===t)return a[i].name=n,void(a[i].edit=!1);a[i].child&&a[i].child.length>0&&e(t,n,a[i].child)}},L=function(e,t){return A(e,0,t)},P=function(e,t){return A(e,1,t)},A=function e(t,n,a){for(var i in a){if(a[i].id===t)return void a.splice(Number(i)+Number(n),0,S());a[i].child&&a[i].child.length>0&&e(t,n,a[i].child)}},B=function e(t,n){for(var a in n){if(n[a].id===t){var i=n[a].child||[];return i.push(S()),void(n[a].child=i)}n[a].child&&n[a].child.length>0&&e(t,n[a].child)}},H=function e(t,n,a){for(var i in a){if(a[i].id===t)return void(a[i].pub=n);a[i].child&&a[i].child.length>0&&e(t,n,a[i].child)}},I=function e(t,n){for(var a in n){if(n[a].id===t)return void(n[a].child&&n[a].child.length>0?alert("\u8bf7\u5148\u5220\u9664\u5b50\u83dc\u5355!"):n.splice(a,1));n[a].child&&n[a].child.length>0&&e(t,n[a].child)}},U=function(e,t){return F(e,-1,t)},J=function(e,t){return F(e,1,t)},F=function e(t,n,a){for(var i in a){if(a[i].id===t){var r=a.splice(i,1);return void a.splice(Number(i)+Number(n),0,r[0])}a[i].child&&a[i].child.length>0&&e(t,n,a[i].child)}},R=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={value:""},n.handelChange=function(e){n.setState({value:e.target.value})},n.submit=function(){var e=n.props.submit;e&&e(n.state.value)},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.value;this.setState({value:e})}},{key:"render",value:function(){return c.a.createElement("div",{className:"menu-editor"},c.a.createElement("input",{type:"text",onBlur:this.submit,onChange:this.handelChange,value:this.state.value}))}}]),t}(r.Component),T=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={menu:[],actionMenu:"",curr:246},n.showMenu=function(e){n.setState({actionMenu:e})},n.hideMenu=function(){n.setState({actionMenu:""})},n.toggle=function(e){var t=n.props.history;N.a.setItem("menu",{menu:n.state.menu,curr:e.id,actionMenu:n.state.actionMenu}).then(n.setState({curr:e.id},t.push("/note/"+e.id)))},n.saveLocal=function(e){N.a.setItem("menu",{menu:e,curr:n.state.curr,actionMenu:n.state.actionMenu}).then(n.setState({menu:e}))},n.addFirstMenu=function(){var e=[S()];n.saveLocal(e)},n.reName=function(e){var t=w(n.state.menu);x(e,t),n.saveLocal(t)},n.confirmName=function(e,t){var a=w(n.state.menu);D(e,t,a),n.saveLocal(a)},n.addSiblingBefore=function(e){var t=w(n.state.menu);L(e,t),n.saveLocal(t)},n.addSiblingAfter=function(e){var t=w(n.state.menu);P(e,t),n.saveLocal(t)},n.addChild=function(e){var t=w(n.state.menu);B(e,t),n.saveLocal(t)},n.changePub=function(e,t){var a=w(n.state.menu);H(e,t,a),n.saveLocal(a)},n.delMenu=function(e){var t=w(n.state.menu);I(e,t),n.saveLocal(t)},n.moveUp=function(e){var t=w(n.state.menu);U(e,t),n.saveLocal(t)},n.moveDown=function(e){var t=w(n.state.menu);J(e,t),n.saveLocal(t)},n.getDD=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],a=function(a){e[a].child&&e[a].child.length>0?t.push(c.a.createElement("dd",{className:"has-child",key:e[a].id},c.a.createElement("i",{style:{float:"left",lineHeight:"37px",marginRight:"2px"},className:"fa fa-folder-open"}),c.a.createElement("dl",null,c.a.createElement("dt",{className:n.state.curr===e[a].id?"active":"",onClick:function(){return n.toggle(e[a])}},e[a].edit?c.a.createElement(R,{value:e[a].name,submit:function(t){n.confirmName(e[a].id,t)}}):e[a].name,c.a.createElement("i",{className:e[a].pub?"fa fa-unlock":"fa fa-lock",onMouseOver:function(){return n.showMenu(e[a].id)},onMouseOut:function(){return n.hideMenu()}},c.a.createElement("ul",{className:n.state.actionMenu===e[a].id?"show":"hide"},c.a.createElement("li",{onClick:function(){return n.reName(e[a].id)}},"\u91cd\u547d\u540d"),e[a].pub?c.a.createElement("li",{onClick:function(){return n.changePub(e[a].id,!1)}},"\u79c1\u6709"):c.a.createElement("li",{onClick:function(){return n.changePub(e[a].id,!0)}},"\u516c\u5f00"),c.a.createElement("hr",null),c.a.createElement("li",{onClick:function(){return n.delMenu(e[a].id)}},"\u5220\u9664"),a>0?c.a.createElement("li",{onClick:function(){return n.moveUp(e[a].id)}},"\u4e0a\u79fb"):"",a<e.length-1?c.a.createElement("li",{onClick:function(){return n.moveDown(e[a].id)}},"\u4e0b\u79fb"):"",c.a.createElement("hr",null),c.a.createElement("li",{onClick:function(){return n.addChild(e[a].id)}},"\u6dfb\u52a0\u5b50\u83dc\u5355"),c.a.createElement("li",{onClick:function(){return n.addSiblingBefore(e[a].id)}},"\u4e0a\u65b9\u6dfb\u52a0\u540c\u7ea7\u83dc\u5355"),c.a.createElement("li",{onClick:function(){return n.addSiblingAfter(e[a].id)}},"\u4e0b\u65b9\u6dfb\u52a0\u540c\u7ea7\u83dc\u5355")))),e[a].open?n.getDD(e[a].child):""))):t.push(c.a.createElement("dd",{key:e[a].id,className:n.state.curr===e[a].id?"active":"",onClick:function(){return n.toggle(e[a])}},e[a].edit?c.a.createElement(R,{value:e[a].name,submit:function(t){n.confirmName(e[a].id,t)}}):e[a].name,c.a.createElement("i",{className:e[a].pub?"fa fa-unlock":"fa fa-lock",onMouseOver:function(){return n.showMenu(e[a].id)},onMouseOut:function(){return n.hideMenu()}},c.a.createElement("ul",{className:n.state.actionMenu===e[a].id?"show":"hide"},c.a.createElement("li",{onClick:function(){return n.reName(e[a].id)}},"\u91cd\u547d\u540d"),e[a].pub?c.a.createElement("li",{onClick:function(){return n.changePub(e[a].id,!1)}},"\u79c1\u6709"):c.a.createElement("li",{onClick:function(){return n.changePub(e[a].id,!0)}},"\u516c\u5f00"),c.a.createElement("hr",null),c.a.createElement("li",{onClick:function(){return n.delMenu(e[a].id)}},"\u5220\u9664"),a>0?c.a.createElement("li",{onClick:function(){return n.moveUp(e[a].id)}},"\u4e0a\u79fb"):"",a<e.length-1?c.a.createElement("li",{onClick:function(){return n.moveDown(e[a].id)}},"\u4e0b\u79fb"):"",c.a.createElement("hr",null),c.a.createElement("li",{onClick:function(){return n.addChild(e[a].id)}},"\u6dfb\u52a0\u5b50\u83dc\u5355"),c.a.createElement("li",{onClick:function(){return n.addSiblingBefore(e[a].id)}},"\u4e0a\u65b9\u6dfb\u52a0\u540c\u7ea7\u83dc\u5355"),c.a.createElement("li",{onClick:function(){return n.addSiblingAfter(e[a].id)}},"\u4e0b\u65b9\u6dfb\u52a0\u540c\u7ea7\u83dc\u5355")))))},i=0;i<e.length;i++)a(i);return t},n.getDL=function(e){for(var t=[],a=function(a){t.push(c.a.createElement("dl",{key:e[a].id},e[a].child&&e[a].child.length>0?c.a.createElement("i",{style:{float:"left",lineHeight:"37px",marginRight:"2px"},className:"fa fa-folder-open"}):"",c.a.createElement("dt",{className:n.state.curr===e[a].id?"active":"",onClick:function(){return n.toggle(e[a])}},e[a].edit?c.a.createElement(R,{value:e[a].name,submit:function(t){n.confirmName(e[a].id,t)}}):e[a].name,c.a.createElement("i",{className:e[a].pub?"fa fa-unlock":"fa fa-lock",onMouseOver:function(){return n.showMenu(e[a].id)},onMouseOut:function(){return n.hideMenu()}},c.a.createElement("ul",{className:n.state.actionMenu===e[a].id?"show":"hide"},c.a.createElement("li",{onClick:function(){return n.reName(e[a].id)}},"\u91cd\u547d\u540d"),e[a].pub?c.a.createElement("li",{onClick:function(){return n.changePub(e[a].id,!1)}},"\u79c1\u6709"):c.a.createElement("li",{onClick:function(){return n.changePub(e[a].id,!0)}},"\u516c\u5f00"),c.a.createElement("hr",null),c.a.createElement("li",{onClick:function(){return n.delMenu(e[a].id)}},"\u5220\u9664"),a>0?c.a.createElement("li",{onClick:function(){return n.moveUp(e[a].id)}},"\u4e0a\u79fb"):"",a<e.length-1?c.a.createElement("li",{onClick:function(){return n.moveDown(e[a].id)}},"\u4e0b\u79fb"):"",c.a.createElement("hr",null),c.a.createElement("li",{onClick:function(){return n.addChild(e[a].id)}},"\u6dfb\u52a0\u5b50\u83dc\u5355"),c.a.createElement("li",{onClick:function(){return n.addSiblingBefore(e[a].id)}},"\u4e0a\u65b9\u6dfb\u52a0\u540c\u7ea7\u83dc\u5355"),c.a.createElement("li",{onClick:function(){return n.addSiblingAfter(e[a].id)}},"\u4e0b\u65b9\u6dfb\u52a0\u540c\u7ea7\u83dc\u5355")))),e[a].open?n.getDD(e[a].child):""))},i=0;i<e.length;i++)a(i);return t},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.getItem("menu").then(function(t){var n=t||{};e.setState({menu:n.menu||[],curr:n.curr,actionMenu:n.actionMenu})})}},{key:"render",value:function(){return c.a.createElement("div",{className:"menu"},this.state.menu&&this.state.menu.length>0?this.getDD(this.state.menu):c.a.createElement("div",{className:"btn",onClick:this.addFirstMenu},"\u70b9\u51fb\u6dfb\u52a0\u60a8\u7684\u7b2c\u4e00\u4e2a\u83dc\u5355"))}}]),t}(r.Component),W=Object(l.b)(function(e){return{}},function(e){return{login:function(t){e(k(t))}}})(T),_=n(25),q=n.n(_),$=n(26),z=n.n($),G=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={text:""},n.openEdit=function(){var e=n.props.match.params.id,t=new q.a;t.on("fileChange",function(e){n.setState({text:e.content.text,html:e.content.html})}),t.on("close",function(){N.a.setItem(e,{version:z()(n.state.text),text:n.state.text,html:n.state.html})}),t.openFile({content:{text:n.state.text}})},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.match.params.id;N.a.getItem(n).then(function(e){e=e||{},t.setState({text:e.text,html:e.html})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"md"},c.a.createElement("span",{className:"edit-note",href:"javascript:void(0);",onClick:function(){return e.openEdit()}},"\u7f16\u8f91\u8be5\u6587\u6863"),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.html}}))}}]),t}(r.Component),K=Object(l.b)(function(e){return{}},function(e){return{login:function(t){e(k(t))}}})(G),Q=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.match;return c.a.createElement("div",{className:"home"},c.a.createElement(O,null),c.a.createElement(W,this.props),c.a.createElement("section",{className:"main"},c.a.createElement(E.a,null,c.a.createElement(g.a,{path:e.path+"note/:id",render:function(e){return c.a.createElement(K,e)}}))),c.a.createElement("div",{className:"popup"},"xxxxxx"))}}]),t}(r.Component),V=Object(l.b)(function(e){return{}},function(e){return{login:function(t){e(k(t))}}})(Q),X=n(28),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loginErr:!1,registryErr:!1,user:null};switch((arguments.length>1?arguments[1]:void 0).type){case"HOME/SUCCESS":return Object(X.a)({},e,{loginErr:!1,registryErr:!1});default:return e}},Z={Home:i},ee=Object(s.c)({home:Z.Home.reducer}),te=[d.a],ne=Object(s.d)(s.a.apply(void 0,te)),ae=Object(s.e)(ee,{},ne),ie=(n(50),n(52),n(54),n(57)),re=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement(ie.a,{className:"app"},c.a.createElement("div",null,c.a.createElement(E.a,null,c.a.createElement(g.a,{path:"/",component:Z.Home.view}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(l.a,{store:ae},c.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.76bffe73.chunk.js.map